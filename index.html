<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bitcoin Trading Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root {
            --black: #000000;
            --white: #ffffff;
            --red: #dc3545;
            --green: #198754;
            --gray-dark: #212529;
            --gray-light: #f8f9fa;
        }
        
        body {
            background-color: var(--black);
            color: var(--white);
            font-family: 'Segoe UI', system-ui, sans-serif;
        }
        
        .dashboard-header {
            background-color: var(--gray-dark);
            border-bottom: 1px solid #333;
            padding: 1rem 0;
        }
        
        .status-indicator {
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            font-weight: 600;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .status-buy {
            background-color: rgba(25, 135, 84, 0.2);
            border: 1px solid var(--green);
            color: var(--green);
        }
        
        .status-sell {
            background-color: rgba(220, 53, 69, 0.2);
            border: 1px solid var(--red);
            color: var(--red);
        }
        
        .status-prepare {
            background-color: rgba(255, 193, 7, 0.2);
            border: 1px solid #ffc107;
            color: #ffc107;
        }
        
        .status-wait {
            background-color: rgba(108, 117, 125, 0.2);
            border: 1px solid #6c757d;
            color: #6c757d;
        }
        
        .card {
            background-color: var(--gray-dark);
            border: 1px solid #333;
            color: var(--white);
            margin-bottom: 1.5rem;
        }
        
        .card-header {
            background-color: rgba(0, 0, 0, 0.5);
            border-bottom: 1px solid #333;
            font-weight: 600;
        }
        
        .news-item {
            border-bottom: 1px solid #333;
            padding: 1rem 0;
            transition: background-color 0.2s;
        }
        
        .news-item:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        .news-item:last-child {
            border-bottom: none;
        }
        
        .news-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .news-source {
            color: #aaa;
            font-size: 0.875rem;
        }
        
        .strategy-item {
            margin-bottom: 1rem;
            padding: 1rem;
            border-left: 3px solid var(--green);
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        .time-slot {
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            border-radius: 0.375rem;
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        .time-active {
            border-left: 4px solid var(--green);
        }
        
        .time-inactive {
            border-left: 4px solid #6c757d;
        }
        
        .badge-green {
            background-color: var(--green);
        }
        
        .badge-red {
            background-color: var(--red);
        }
        
        .last-updated {
            color: #aaa;
            font-size: 0.875rem;
            text-align: right;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="dashboard-header">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <h1 class="h3 mb-0">Bitcoin Trading Dashboard</h1>
                    <p class="mb-0 text-muted">Real-time insights for strategic trading</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <div id="current-time" class="h5 mb-1"></div>
                    <div id="trading-status" class="status-indicator status-wait">Analyzing market conditions...</div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container my-4">
        <div class="row">
            <!-- Trading Strategy & Times -->
            <div class="col-lg-4">
                <!-- Trading Strategy -->
                <div class="card">
                    <div class="card-header">
                        Trading Strategy
                    </div>
                    <div class="card-body">
                        <div class="strategy-item">
                            <h5>Entry Conditions</h5>
                            <ul class="mb-0">
                                <li>RSI â‰¤ 30 on 15-min chart</li>
                                <li>5-min, 15-min & 1hr bullish alignment</li>
                                <li>EMA 20 > EMA 50 on all timeframes</li>
                                <li>Green candle forms with volume increase</li>
                            </ul>
                        </div>
                        
                        <div class="strategy-item">
                            <h5>Exit Conditions</h5>
                            <ul class="mb-0">
                                <li>RSI reaches 65-80 range</li>
                                <li>0.5% profit target achieved</li>
                                <li>Stop loss triggered at 0.3-0.4%</li>
                            </ul>
                        </div>
                        
                        <div class="strategy-item">
                            <h5>Risk Management</h5>
                            <ul class="mb-0">
                                <li>0.3-0.4% risk per trade</li>
                                <li>Max 2-5 trades per day</li>
                                <li>Max $3 daily loss limit</li>
                                <li>Position sizing based on signal quality</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Trading Times -->
                <div class="card">
                    <div class="card-header">
                        Optimal Trading Times (PH Time)
                    </div>
                    <div class="card-body">
                        <div class="time-slot time-active" id="london-session">
                            <div class="d-flex justify-content-between">
                                <strong>London Open</strong>
                                <span class="badge badge-green">ACTIVE</span>
                            </div>
                            <div>4:00 PM - 7:00 PM</div>
                            <small class="text-muted">Highest volatility & direction</small>
                        </div>
                        
                        <div class="time-slot" id="us-session">
                            <div class="d-flex justify-content-between">
                                <strong>US Open</strong>
                                <span class="badge bg-secondary">INACTIVE</span>
                            </div>
                            <div>9:00 PM - 12:00 AM</div>
                            <small class="text-muted">Good momentum moves</small>
                        </div>
                        
                        <div class="time-slot" id="asian-session">
                            <div class="d-flex justify-content-between">
                                <strong>Asian Session</strong>
                                <span class="badge bg-secondary">INACTIVE</span>
                            </div>
                            <div>8:00 AM - 12:00 PM</div>
                            <small class="text-muted">Avoid - low liquidity</small>
                        </div>
                        
                        <div class="mt-3">
                            <small class="text-muted">Best trading days: Tuesday - Thursday</small>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- News Feed -->
            <div class="col-lg-8">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <span>Impactful Trading News</span>
                        <button id="refresh-news" class="btn btn-sm btn-outline-light">Refresh News</button>
                    </div>
                    <div class="card-body p-0">
                        <div id="news-container">
                            <!-- News items will be loaded here -->
                            <div class="text-center p-4">
                                <div class="spinner-border text-light" role="status">
                                    <span class="visually-hidden">Loading...</span>
                                </div>
                                <p class="mt-2">Loading latest news...</p>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer">
                        <div class="last-updated">
                            Last updated: <span id="last-updated-time">--</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Current time and status updates
        function updateTimeAndStatus() {
            const now = new Date();
            const phTime = new Date(now.getTime() + (8 * 60 * 60 * 1000)); // UTC+8 for PH Time
            const hours = phTime.getUTCHours();
            const minutes = phTime.getUTCMinutes().toString().padStart(2, '0');
            
            // Format time for display
            document.getElementById('current-time').textContent = 
                `PH Time: ${hours}:${minutes}`;
            
            // Update trading status based on time
            const statusElement = document.getElementById('trading-status');
            
            // Trading session logic
            if ((hours >= 16 && hours < 19) || (hours >= 21 && hours < 24)) {
                // Active trading sessions (4PM-7PM, 9PM-12AM)
                if (hours >= 16 && hours < 19) {
                    statusElement.className = 'status-indicator status-buy';
                    statusElement.textContent = 'ACTIVE: London Session - Look for RSI buy setups';
                } else {
                    statusElement.className = 'status-indicator status-prepare';
                    statusElement.textContent = 'ACTIVE: US Session - Prepare for momentum moves';
                }
            } else if (hours >= 8 && hours < 12) {
                // Asian session - avoid
                statusElement.className = 'status-indicator status-wait';
                statusElement.textContent = 'INACTIVE: Asian Session - Avoid trading, low liquidity';
            } else {
                // Outside trading hours
                statusElement.className = 'status-indicator status-wait';
                statusElement.textContent = 'MARKET CLOSED: Wait for next trading session';
            }
            
            // Update session badges
            updateSessionBadges(hours);
        }
        
        function updateSessionBadges(hours) {
            const londonSession = document.getElementById('london-session');
            const usSession = document.getElementById('us-session');
            const asianSession = document.getElementById('asian-session');
            
            // Reset all
            londonSession.className = 'time-slot time-inactive';
            usSession.className = 'time-slot time-inactive';
            asianSession.className = 'time-slot time-inactive';
            
            // Update badges
            if (hours >= 16 && hours < 19) {
                londonSession.className = 'time-slot time-active';
                londonSession.querySelector('.badge').className = 'badge badge-green';
                londonSession.querySelector('.badge').textContent = 'ACTIVE';
            } else if (hours >= 21 || hours < 1) {
                usSession.className = 'time-slot time-active';
                usSession.querySelector('.badge').className = 'badge badge-green';
                usSession.querySelector('.badge').textContent = 'ACTIVE';
            } else if (hours >= 8 && hours < 12) {
                asianSession.className = 'time-slot time-active';
                asianSession.querySelector('.badge').className = 'badge badge-red';
                asianSession.querySelector('.badge').textContent = 'AVOID';
            }
        }
        
        // News fetching functionality
        async function fetchNews() {
            const newsContainer = document.getElementById('news-container');
            const lastUpdatedTime = document.getElementById('last-updated-time');
            
            try {
                // Using CryptoPanic as a news source (free API for crypto news)
                const response = await fetch('https://cryptopanic.com/api/v1/posts/?auth_token=demo&kind=news');
                const data = await response.json();
                
                // Update last updated time
                const now = new Date();
                lastUpdatedTime.textContent = now.toLocaleTimeString();
                
                // Clear loading indicator
                newsContainer.innerHTML = '';
                
                // Process and display news (limit to 20)
                const newsToShow = data.results.slice(0, 20);
                
                if (newsToShow.length === 0) {
                    newsContainer.innerHTML = '<div class="p-3 text-center">No news available at the moment.</div>';
                    return;
                }
                
                newsToShow.forEach(item => {
                    const newsItem = document.createElement('div');
                    newsItem.className = 'news-item px-3';
                    
                    const title = item.title || 'No title available';
                    const source = item.source?.title || 'Unknown source';
                    const url = item.url || '#';
                    const publishedAt = new Date(item.published_at).toLocaleString();
                    
                    // Determine if news is positive/negative based on votes
                    const votes = item.votes || {};
                    const isPositive = votes.positive > votes.negative;
                    const sentimentClass = isPositive ? 'text-success' : 'text-danger';
                    const sentimentIcon = isPositive ? 'ðŸŸ¢' : 'ðŸ”´';
                    
                    newsItem.innerHTML = `
                        <div class="news-title">
                            ${sentimentIcon} <a href="${url}" target="_blank" class="text-white">${title}</a>
                        </div>
                        <div class="d-flex justify-content-between">
                            <span class="news-source">${source}</span>
                            <span class="${sentimentClass}">${publishedAt}</span>
                        </div>
                    `;
                    
                    newsContainer.appendChild(newsItem);
                });
                
            } catch (error) {
                console.error('Error fetching news:', error);
                newsContainer.innerHTML = `
                    <div class="p-3 text-center text-danger">
                        Failed to load news. Please try again later.
                    </div>
                `;
            }
        }
        
        // Manual news refresh
        document.getElementById('refresh-news').addEventListener('click', fetchNews);
        
        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            // Set up time updates
            updateTimeAndStatus();
            setInterval(updateTimeAndStatus, 60000); // Update every minute
            
            // Load initial news
            fetchNews();
            
            // Auto-refresh news every 5 minutes
            setInterval(fetchNews, 300000);
        });
    </script>
</body>
</html>